# 22. Тестирование: Организация. Интеграционное тестирование

## Организация тестирования
::: details Основная информация
Рекомендуемый шаблон - V-модель

1. Блочное тестирование - на уровне блоков и маленьких компонент [*(белый ящик)*](19.md#метод-белого-ящика)
2. Интеграционное тестирование - во время сборки компонент [*(черный ящик)*](20.md#метод-черного-ящика)
3. Системное тестирование - программная система в целом [*(черный ящик)*](20.md#метод-черного-ящика)

Для каждой стадии разные методы тестирования.  
Тестирование начинается разработчиками кода, а завершается независимыми тестировщиками.  Автор кода гарантирует свойства и качества кода, который он создал.  
Во время тестирования ПС целиком появляются эксперты.

> Тестирование - неизбежная часть любой профессиональной разработки ПО.

### Критерии завершения тестирования
1. Запланированные тесты проходят без обнаружения ошибок (для несложных систем).
2. Есть оценки критичности ошибок и план отладки.
3. Статистические оценки (% ошибок, % сбоев при выполнении) ошибок меньше заданного порога (для сложных систем).
:::

## Интеграционное тестирование

> Если каждый блок в отдельности работсает правильно, не факт, что не возникнут проблемы при сборке :(

Основная проблема - ошибки в интерфейсах между модулями.  
Маленький модуль проще разрабатывать, но сложнее подключать к нему интерфейс.  

Интеграционное тестирование определяет системный подход к сборке ПО. Одновременно со сборкой выполняется тестирование интерфейсов.

> За один шаг собирать всю систему плохо :(

Метод "Большого взрыва" (единоразовая сборка системы) использовать не рекумендуется. Сборку надо организовать как плановый процесс:
- сверху вниз - нисходящая сборка - от main к внешним вызовам
- снизу вверх - восходящая сборка - объединение подсистем в более крупные

### Нисходящее тестирование и сборка

Главный модуль используется как драйвер: одна из заглушек заменяется на реальный вызов.  
После подключения модуля выполняем тестирование текущей сборки.

![Математические модели](../images/НисходящееТестирование.png)

### Восходящее тестирование и сборка

Подчиненные модули всегда доступны -> нет необходимости в заглушках.

![Математические модели](../images/ВосходящееТестирование.png)

- Модули нижнего уровня объединяются в кластеры
- Для координации ввода-вывода тестов требуется драйвер кластера
- Тестируется собранный кластер
- Сборка продолжается путем объединения кластеров

---

### Недостатки и достоинства подходов к сборке

|#|Нисходящее|Восходящее|
|---|---|---|
|Достоинства|Наличие программной системы -> большой объем тестирования для важных модулей|Отсутствие заглушек -> существенное увеличение и упрощение вариативности тестов|
|Недостатки|Наличие загрушек|Отсутствие программной системы до завершения сборки|

---

### Дополнительное тестирование

Обычно ИТ разделяется на подмножества задач, и каждой группе разработчиков достается свое подмножество. Внесение кем-то изменений в программный код вызывает ошибки, которые ранее не обнаруживались.

- Регрессионное тестирование (перезапуск всех тестов, чтобы отловить ошибки после отладки и изменения кода).
- Smoke-тестирование - регулярное тестирование текущей сборки (прогон тестов с некоторой периодичностью (раз в сутки, например)).
